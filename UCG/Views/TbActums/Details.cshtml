@model UCG.Models.TbActum

@{
    ViewData["Title"] = "Detalles del Acta";
}

<h1>Detalles del Acta</h1>

<hr />

<!-- Información Principal del Acta -->
<div>
    <h4>Información General</h4>
    <dl class="row">
        <dt class="col-sm-2">Fecha Sesión:</dt>
        <dd class="col-sm-10">@Model.FechaSesion.ToString("dd/MM/yyyy")</dd>

        <dt class="col-sm-2">Número Acta:</dt>
        <dd class="col-sm-10">@Model.NumeroActa</dd>

        <dt class="col-sm-2">Descripción:</dt>
        <dd class="col-sm-10">@Model.Descripcion</dd>

        <dt class="col-sm-2">Estado:</dt>
        <dd class="col-sm-10">@Model.Estado.ToString()</dd>

        <dt class="col-sm-2">Monto Total Acordado:</dt>
        <dd class="col-sm-10">₡@(Model.MontoTotalAcordado.HasValue ? Model.MontoTotalAcordado.Value.ToString("N2") : "0.00")</dd>

        <dt class="col-sm-2">Asociación:</dt>
        <dd class="col-sm-10">
            <a asp-controller="TbAsociacions" asp-action="Details" asp-route-id="@Model.IdAsociacionNavigation?.IdAsociacion">
                @Model.IdAsociacionNavigation?.Nombre
            </a>
        </dd>

        <dt class="col-sm-2">Asociado Responsable:</dt>
        <dd class="col-sm-10">
            <a asp-controller="TbAsociadoes" asp-action="Details" asp-route-id="@Model.IdAsociadoNavigation?.IdAsociado">
                @Model.IdAsociadoNavigation?.Nombre
            </a>
        </dd>
    </dl>
</div>



<!-- Tabla de Asistencias -->
<h4>Asistencias</h4>
<table id="tablaAsistencias" class="table table-striped table-hover display">
    <thead>
        <tr>
            <th>Fecha</th>
            <th>Asociado</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var asistencia in Model.TbActaAsistencias)
        {
            <tr data-id="@asistencia.IdActaAsistencia">
                <td>@asistencia.Fecha.ToString("dd/MM/yyyy")</td>
                <td>@asistencia.IdAsociadoNavigation?.Nombre</td>
            </tr>
        }
    </tbody>
</table>

<!-- Tabla de Acuerdos -->
<h4>Acuerdos</h4>
<table id="tablaAcuerdos" class="table table-striped table-hover display">
    <thead>
        <tr>
            <th>Nombre</th>
            <th>Descripción</th>
            <th>Monto</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var acuerdo in Model.TbAcuerdos)
        {
            <tr data-id="@acuerdo.IdAcuerdo">
                <td>@acuerdo.Nombre</td>
                <td>@Html.Raw(acuerdo.Descripcion)</td>
                <td>₡@(acuerdo.MontoAcuerdo.HasValue ? acuerdo.MontoAcuerdo.Value.ToString("N2") : "0.00")</td>
            </tr>
        }
    </tbody>
</table>

<!-- Botones -->
<div class="mt-4">
    <a asp-action="Edit" asp-route-id="@Model?.IdActa" class="btn btn-warning">Editar</a>
    <a asp-action="Index" class="btn btn-secondary ms-2">Volver al listado</a>
</div>


<!-- DataTables CSS con Bootstrap -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/dataTables.bootstrap5.min.css">

@section Scripts {
    @{
        <!-- Tu script separado -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

        <!-- DataTables JS -->
        <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
        <script src="https://cdn.datatables.net/1.13.6/js/dataTables.bootstrap5.min.js"></script>
        <script src="~/js/ActaScripts/ActaDetail.js"></script>
    }
}
